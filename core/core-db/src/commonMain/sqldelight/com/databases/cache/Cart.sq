import com.foodsaver.app.dto.ProductDto;

CREATE TABLE IF NOT EXISTS cartEntity (
    localId INTEGER PRIMARY KEY AUTOINCREMENT,
    globalId TEXT,
    product TEXT AS ProductDto NOT NULL,
    quantity INTEGER NOT NULL,
    tempId TEXT NOT NULL UNIQUE
);

selectAll:
SELECT * FROM cartEntity;

insertCartItem:
INSERT INTO cartEntity (globalId, product, quantity, tempId)
VALUES (?, ?, ?, ?);

insertCart:
INSERT INTO cartEntity
VALUES ?;

clearCart:
DELETE FROM cartEntity;

deleteCartItemByLocalId:
DELETE FROM cartEntity WHERE localId = ?;

deleteCartItemByGlobalId:
DELETE FROM cartEntity WHERE globalId = ?;

deleteCartItemByTempId:
DELETE FROM cartEntity WHERE tempId = ?;

updateCartItemByTempId:
UPDATE cartEntity
SET globalId = ?
WHERE tempId = ?;

updateCountByGlobalId:
UPDATE cartEntity
SET quantity = ?
WHERE globalId = ?;

getCartItemByProductId:
SELECT * FROM cartEntity WHERE tempId = ? OR globalId = ? LIMIT 1;